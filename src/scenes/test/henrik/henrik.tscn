[gd_scene load_steps=4 format=3 uid="uid://clk1iiypwkn2j"]

[ext_resource type="Script" path="res://scenes/test/felix/testscne.gd" id="1_r2gxb"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_4kd2u"]
vertices = PackedVector2Array(962, 139, 738, 139, 224, 124, 276, 124, 662, 339, 438, 339, 24, 324, 76, 324, 148, 152, 176, 124, 724, 176, 676, 176, 962, 439, 838, 439, 724, 424, 776, 424, -214.75, 1118.58, 462, 965, 548, 952, 648, 952, 1114.9, 1080.4, 724, 924, 776, 924, 924, 376, 876, 376, 624, 324, 676, 324, 324, 524, 338, 539, 324, 576, 276, 576, 262, 565, 276, 524, 962, 865, 924, 924, 924, 876, 324, 424, 324, 376, 348, 343, 348, 539, 238, 965, 62, 965, 738, -61, 738, 65, 724, 24, 724, -24, 738, 265, 724, 224, 338, 665, 324, 624, 538, 565, 538, 665, 524, 624, 524, 576, 638, 665, 638, 765, 624, 724, 624, 676, 838, 765, 838, 865, 824, 824, 824, 776, 238, 839, 224, 924, 224, 876, 962, 265, 1106.09, -138.133, 962, 65, 924, 124, 124, 924, 176, 924, 676, 924, 924, 724, 962, 739, 862, 739, 876, 724, -62, 965, 324, 476, 924, 324, 924, 276, 876, 276, 876, 876, 76, 924, 62, 839, 76, 876, 962, -61, -193.227, -150.859, 462, 565, 476, 576, 576, 676, 776, 776, 24, 124, 48, 143, -52, 143, -24, 124, 548, 843, 524, 924, 524, 876, 862, 665, 876, 676, 962, 665, 924, 676, 838, 539, 824, 524, 824, 476, 738, 539, 738, 639, 724, 624, 724, 576, 38, 465, 38, 539, 24, 524, 24, 476, -62, 465, -24, 476, -62, 839, 148, 43, 176, 76, 648, 843, 676, 876, 776, 524, 776, 476, 724, 524, 724, 476, 662, 639, 676, 624, 662, 539, 676, 576, -62, 539, -24, 524, 48, 43, 24, 76, 462, 665, 476, 624, 476, 924, 462, 839, 476, 876, 924, 76, 876, 76, 676, -24, 676, 24, 624, 24, 624, -24, 576, -24, 876, 124, 824, 124, 824, 76, 776, 76, 676, 224, 624, 224, 624, 176, 576, 176, 876, 324, 824, 324, 824, 276, 776, 276, 876, 424, 824, 424, 824, 376, 776, 376, 676, 424, 676, 476, 662, 465, 676, 524, 648, 539, 648, 465, 438, 343, 262, 339, 776, 824, 724, 824, 724, 776, 676, 776, 876, 924, 824, 924, 824, 876, 276, 476, 776, 124, 724, 124, 724, 76, 776, 324, 724, 324, 724, 276, 576, 724, 524, 724, 524, 676, 676, 824, 624, 824, 624, 776, 276, 624, 162, 665, 224, 624, 324, 676, 276, 676, 224, 576, 162, 565, 176, 576, 176, 624, 476, 676, 176, 876, 124, 876, 676, 376, 724, 376, 924, 424, 276, 424, 276, 376, -62, 339, -24, 324, -24, 276, -52, 252, -24, 76, -24, 24, 476, 724, 424, 724, 424, 676, 224, 76, 724, 876, 776, 876, 524, 824, 576, 824, 124, 224, 176, 224, 676, 276, 576, 24, 524, 24, 524, -24, 476, -24, 576, 224, 524, 224, 524, 176, 476, 176, 376, 676, 376, 724, 324, 724, 24, 724, 76, 724, 576, 776, 624, 276, 576, 276, 76, 224, 476, 24, 424, 24, 424, -24, 376, -24, 476, 224, 424, 224, 424, 176, 376, 176, 524, 776, 476, 776, 476, 824, 424, 824, 424, 776, 376, 776, -24, 724, 376, 24, 324, 24, 324, -24, 276, -24, 376, 224, 324, 224, 324, 176, 276, 176, 48, 152, 276, 724, 224, 724, 224, 676, 176, 676, 176, 724, 124, 724, 124, 676, 24, 24, 76, 24, 676, 76, 576, 324, 524, 324, 524, 276, 476, 276, 476, 324, 424, 324, 424, 276, 376, 276, 48, 252, 276, 24, 224, 24, 224, -24, 176, -24, 276, 224, 224, 224, 224, 176, 176, 176, -62, 665, 76, 676, 376, 824, 324, 824, 324, 776, 276, 776, 176, 24, 124, 24, 124, -24, 76, -24, 124, 176, 76, 176, 24, 676, -24, 676, 624, 76, 324, 276, 24, -24, -24, -24, 676, 124, 624, 124, 576, 76, 376, 324, 324, 324, 276, 276, 276, 824, 224, 824, 224, 776, 176, 776, 24, 824, 76, 824, -24, 824, -24, 776, 176, 824, 124, 824, 124, 776, 76, 776, 24, 776, 576, 124, 524, 124, 524, 76, 476, 76, 276, 324, 224, 324, 224, 276, 176, 276, 476, 124, 424, 124, 424, 76, 176, 324, 124, 324, 124, 276, 76, 276, 376, 124, 324, 124, 376, 76, 324, 76, 24, 276, 276, 76)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 5, 6, 7), PackedInt32Array(8, 9, 2, 1, 10, 11), PackedInt32Array(12, 13, 14, 15), PackedInt32Array(16, 17, 18, 19, 20), PackedInt32Array(20, 19, 21, 22), PackedInt32Array(23, 24, 25, 26), PackedInt32Array(27, 28, 29, 30, 31, 32), PackedInt32Array(33, 20, 34, 35), PackedInt32Array(36, 37, 38, 39), PackedInt32Array(40, 17, 16), PackedInt32Array(41, 40, 16), PackedInt32Array(42, 43, 44, 45), PackedInt32Array(1, 46, 47, 10), PackedInt32Array(28, 48, 49, 29), PackedInt32Array(50, 51, 52, 53), PackedInt32Array(54, 55, 56, 57), PackedInt32Array(58, 59, 60, 61), PackedInt32Array(62, 40, 63, 64), PackedInt32Array(65, 0, 66, 20), PackedInt32Array(67, 66, 0, 68), PackedInt32Array(40, 41, 69, 70), PackedInt32Array(71, 21, 19), PackedInt32Array(72, 73, 74, 75), PackedInt32Array(76, 41, 16), PackedInt32Array(39, 28, 27, 77), PackedInt32Array(65, 78, 79), PackedInt32Array(46, 65, 79, 80), PackedInt32Array(59, 33, 35, 81), PackedInt32Array(82, 69, 41), PackedInt32Array(82, 41, 83, 84), PackedInt32Array(66, 67, 85), PackedInt32Array(86, 66, 85, 42), PackedInt32Array(87, 50, 53, 88), PackedInt32Array(51, 54, 57, 89), PackedInt32Array(55, 58, 61, 90), PackedInt32Array(91, 92, 93, 94), PackedInt32Array(95, 18, 96, 97), PackedInt32Array(75, 74, 98, 99), PackedInt32Array(99, 98, 100, 101), PackedInt32Array(13, 102, 103, 104), PackedInt32Array(105, 106, 107, 108), PackedInt32Array(109, 110, 111, 112), PackedInt32Array(113, 109, 112, 114), PackedInt32Array(76, 16, 86, 115), PackedInt32Array(9, 8, 116, 117), PackedInt32Array(71, 19, 118, 119), PackedInt32Array(103, 102, 105, 120), PackedInt32Array(121, 120, 105, 122, 123), PackedInt32Array(107, 106, 124, 125), PackedInt32Array(125, 124, 126, 127), PackedInt32Array(111, 110, 128, 129), PackedInt32Array(130, 92, 91, 131), PackedInt32Array(132, 87, 88, 133), PackedInt32Array(96, 18, 17, 134), PackedInt32Array(134, 17, 135, 136), PackedInt32Array(67, 68, 137), PackedInt32Array(43, 67, 137, 138), PackedInt32Array(86, 42, 45, 139), PackedInt32Array(14, 13, 104, 121), PackedInt32Array(139, 140, 141, 142), PackedInt32Array(86, 139, 142), PackedInt32Array(86, 142, 143), PackedInt32Array(138, 144, 145, 146), PackedInt32Array(43, 138, 146), PackedInt32Array(43, 146, 147), PackedInt32Array(11, 148, 149, 150), PackedInt32Array(8, 11, 150), PackedInt32Array(8, 150, 151), PackedInt32Array(80, 152, 153, 154), PackedInt32Array(46, 80, 154), PackedInt32Array(46, 154, 155), PackedInt32Array(24, 156, 157, 158), PackedInt32Array(25, 24, 158), PackedInt32Array(25, 158, 159, 4), PackedInt32Array(14, 121, 123, 160), PackedInt32Array(160, 123, 161, 162), PackedInt32Array(163, 126, 164, 165, 162, 161), PackedInt32Array(6, 5, 166, 38, 167), PackedInt32Array(90, 168, 169, 170), PackedInt32Array(55, 90, 170), PackedInt32Array(55, 170, 171), PackedInt32Array(81, 172, 173, 174, 59), PackedInt32Array(32, 31, 167, 175), PackedInt32Array(43, 147, 176, 177, 178), PackedInt32Array(46, 155, 179, 180, 181), PackedInt32Array(72, 101, 100, 73), PackedInt32Array(113, 114, 129, 128), PackedInt32Array(51, 89, 182, 183, 184), PackedInt32Array(55, 171, 185, 186, 187), PackedInt32Array(140, 44, 43), PackedInt32Array(148, 47, 46), PackedInt32Array(188, 49, 48), PackedInt32Array(189, 190, 188, 48, 191, 192), PackedInt32Array(30, 188, 190, 193, 31), PackedInt32Array(194, 31, 193, 195), PackedInt32Array(189, 194, 195, 196), PackedInt32Array(189, 196, 190), PackedInt32Array(132, 133, 52, 51, 184, 197), PackedInt32Array(182, 56, 55), PackedInt32Array(182, 55, 183), PackedInt32Array(168, 60, 59), PackedInt32Array(70, 63, 40), PackedInt32Array(198, 70, 69, 199), PackedInt32Array(163, 122, 105, 108, 127, 126), PackedInt32Array(160, 162, 4, 200), PackedInt32Array(201, 200, 4), PackedInt32Array(97, 136, 135, 95), PackedInt32Array(62, 64, 198), PackedInt32Array(199, 84, 83, 62), PackedInt32Array(12, 202, 23, 65), PackedInt32Array(36, 39, 77), PackedInt32Array(203, 36, 77, 175), PackedInt32Array(203, 175, 167), PackedInt32Array(204, 203, 167), PackedInt32Array(37, 204, 167, 38), PackedInt32Array(6, 167, 205, 206), PackedInt32Array(207, 206, 205, 208), PackedInt32Array(209, 94, 93), PackedInt32Array(130, 131, 209, 210), PackedInt32Array(132, 197, 211, 212, 213), PackedInt32Array(214, 117, 116), PackedInt32Array(215, 119, 118), PackedInt32Array(172, 34, 20), PackedInt32Array(59, 174, 216, 118), PackedInt32Array(20, 33, 73), PackedInt32Array(141, 140, 43), PackedInt32Array(149, 148, 46), PackedInt32Array(169, 168, 59), PackedInt32Array(173, 172, 20), PackedInt32Array(62, 198, 199), PackedInt32Array(22, 173, 20), PackedInt32Array(216, 22, 21, 215), PackedInt32Array(20, 73, 100), PackedInt32Array(216, 215, 118), PackedInt32Array(59, 118, 217, 218), PackedInt32Array(144, 68, 0), PackedInt32Array(156, 202, 12), PackedInt32Array(20, 100, 12), PackedInt32Array(65, 20, 12), PackedInt32Array(78, 65, 23), PackedInt32Array(152, 78, 23), PackedInt32Array(153, 152, 23), PackedInt32Array(179, 153, 23), PackedInt32Array(179, 23, 180), PackedInt32Array(219, 220, 46, 181, 221), PackedInt32Array(222, 141, 43), PackedInt32Array(222, 43, 223), PackedInt32Array(143, 222, 223, 224), PackedInt32Array(86, 143, 224), PackedInt32Array(86, 224, 225), PackedInt32Array(226, 149, 46), PackedInt32Array(226, 46, 227), PackedInt32Array(151, 226, 227, 228), PackedInt32Array(8, 151, 228), PackedInt32Array(8, 228, 229), PackedInt32Array(211, 183, 55), PackedInt32Array(211, 55, 212), PackedInt32Array(48, 132, 213, 230), PackedInt32Array(48, 230, 231, 232, 191), PackedInt32Array(185, 169, 59), PackedInt32Array(185, 59, 186), PackedInt32Array(233, 234, 55, 187, 235), PackedInt32Array(26, 180, 23), PackedInt32Array(221, 26, 25, 236), PackedInt32Array(219, 221, 236), PackedInt32Array(219, 236, 237, 238), PackedInt32Array(239, 223, 43), PackedInt32Array(239, 43, 240), PackedInt32Array(225, 239, 240, 241), PackedInt32Array(86, 225, 241), PackedInt32Array(86, 241, 242), PackedInt32Array(243, 227, 46), PackedInt32Array(243, 46, 244), PackedInt32Array(229, 243, 244, 245), PackedInt32Array(8, 229, 245), PackedInt32Array(8, 245, 246), PackedInt32Array(231, 212, 55), PackedInt32Array(231, 55, 232), PackedInt32Array(218, 186, 59), PackedInt32Array(235, 218, 217, 247), PackedInt32Array(233, 235, 247), PackedInt32Array(233, 247, 248), PackedInt32Array(145, 144, 0), PackedInt32Array(157, 156, 12), PackedInt32Array(249, 217, 118), PackedInt32Array(249, 118, 250), PackedInt32Array(248, 249, 250, 251), PackedInt32Array(233, 248, 251), PackedInt32Array(233, 251, 252, 253), PackedInt32Array(254, 240, 43), PackedInt32Array(254, 43, 255), PackedInt32Array(242, 254, 255, 256), PackedInt32Array(86, 242, 256), PackedInt32Array(86, 256, 257), PackedInt32Array(258, 244, 46), PackedInt32Array(258, 46, 259), PackedInt32Array(246, 258, 259, 260), PackedInt32Array(8, 246, 260), PackedInt32Array(8, 260, 261, 262), PackedInt32Array(263, 232, 55), PackedInt32Array(263, 55, 264), PackedInt32Array(192, 263, 264, 265), PackedInt32Array(189, 192, 265), PackedInt32Array(189, 265, 266), PackedInt32Array(189, 266, 267, 268, 269), PackedInt32Array(176, 145, 0), PackedInt32Array(176, 0, 177), PackedInt32Array(270, 271, 43, 178, 272), PackedInt32Array(15, 157, 12), PackedInt32Array(159, 15, 14, 201), PackedInt32Array(159, 201, 4), PackedInt32Array(273, 25, 4), PackedInt32Array(273, 4, 274), PackedInt32Array(237, 273, 274, 275), PackedInt32Array(238, 237, 275), PackedInt32Array(238, 275, 276), PackedInt32Array(277, 274, 4), PackedInt32Array(277, 4, 278), PackedInt32Array(276, 277, 278, 279), PackedInt32Array(238, 276, 279), PackedInt32Array(238, 279, 280, 281), PackedInt32Array(282, 255, 43), PackedInt32Array(282, 43, 283), PackedInt32Array(257, 282, 283, 284), PackedInt32Array(86, 257, 284), PackedInt32Array(86, 284, 285), PackedInt32Array(286, 259, 46), PackedInt32Array(286, 46, 287), PackedInt32Array(261, 286, 287, 288), PackedInt32Array(262, 261, 288), PackedInt32Array(262, 288, 289), PackedInt32Array(267, 264, 55), PackedInt32Array(267, 55, 268), PackedInt32Array(290, 189, 269, 291), PackedInt32Array(292, 250, 118), PackedInt32Array(292, 118, 293), PackedInt32Array(252, 292, 293, 294), PackedInt32Array(253, 252, 294), PackedInt32Array(253, 294, 295), PackedInt32Array(296, 283, 43), PackedInt32Array(296, 43, 297), PackedInt32Array(285, 296, 297, 298), PackedInt32Array(86, 285, 298), PackedInt32Array(86, 298, 299), PackedInt32Array(220, 287, 46), PackedInt32Array(289, 220, 219, 300), PackedInt32Array(262, 289, 300), PackedInt32Array(262, 300, 301), PackedInt32Array(281, 262, 301, 238), PackedInt32Array(234, 268, 55), PackedInt32Array(291, 234, 233, 302), PackedInt32Array(290, 291, 302), PackedInt32Array(290, 302, 303), PackedInt32Array(290, 303, 253), PackedInt32Array(210, 270, 272, 304), PackedInt32Array(208, 281, 280, 305), PackedInt32Array(271, 297, 43), PackedInt32Array(299, 271, 270, 306), PackedInt32Array(86, 299, 306), PackedInt32Array(86, 306, 307), PackedInt32Array(86, 307, 210, 93), PackedInt32Array(308, 177, 0), PackedInt32Array(308, 0, 309), PackedInt32Array(272, 308, 309, 304), PackedInt32Array(210, 304, 310), PackedInt32Array(311, 278, 4), PackedInt32Array(311, 4, 312), PackedInt32Array(280, 311, 312, 305), PackedInt32Array(208, 305, 313), PackedInt32Array(314, 293, 118), PackedInt32Array(314, 118, 315), PackedInt32Array(295, 314, 315, 316), PackedInt32Array(253, 295, 316), PackedInt32Array(253, 316, 317), PackedInt32Array(118, 95, 135), PackedInt32Array(118, 135, 318, 319), PackedInt32Array(318, 135, 62), PackedInt32Array(318, 62, 83), PackedInt32Array(318, 83, 115, 320), PackedInt32Array(321, 320, 115, 290), PackedInt32Array(322, 315, 118), PackedInt32Array(322, 118, 323), PackedInt32Array(317, 322, 323, 324), PackedInt32Array(253, 317, 324), PackedInt32Array(253, 324, 325), PackedInt32Array(253, 325, 319, 326), PackedInt32Array(327, 309, 0), PackedInt32Array(327, 0, 328), PackedInt32Array(310, 327, 328, 329), PackedInt32Array(210, 310, 329), PackedInt32Array(210, 329, 330, 116), PackedInt32Array(331, 312, 4), PackedInt32Array(331, 4, 332), PackedInt32Array(313, 331, 332, 333), PackedInt32Array(208, 313, 333), PackedInt32Array(208, 333, 334), PackedInt32Array(319, 323, 118), PackedInt32Array(319, 318, 326), PackedInt32Array(253, 326, 321), PackedInt32Array(290, 253, 321), PackedInt32Array(290, 115, 86), PackedInt32Array(128, 290, 86), PackedInt32Array(113, 128, 86), PackedInt32Array(205, 113, 86), PackedInt32Array(335, 328, 0), PackedInt32Array(335, 0, 336), PackedInt32Array(330, 335, 336, 337), PackedInt32Array(338, 332, 4), PackedInt32Array(338, 4, 339), PackedInt32Array(334, 338, 339, 340), PackedInt32Array(208, 334, 340), PackedInt32Array(208, 340, 341), PackedInt32Array(342, 336, 0), PackedInt32Array(342, 0, 343), PackedInt32Array(344, 342, 343, 345), PackedInt32Array(7, 339, 4), PackedInt32Array(341, 7, 6, 346), PackedInt32Array(208, 341, 346), PackedInt32Array(208, 346, 207), PackedInt32Array(208, 205, 86, 93), PackedInt32Array(209, 93, 210), PackedInt32Array(116, 130, 210), PackedInt32Array(116, 330, 337), PackedInt32Array(116, 337, 344), PackedInt32Array(116, 344, 345), PackedInt32Array(116, 345, 347), PackedInt32Array(214, 116, 347), PackedInt32Array(214, 347, 3, 2), PackedInt32Array(0, 3, 343)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-207, -165, -229, 1133, 1129, 1094, 1120, -152)])
agent_radius = 14.0

[sub_resource type="GDScript" id="GDScript_lbftg"]
script/source = "@tool
extends NavigationRegion2D

const BYGGE = preload(\"res://scenes/test/felix/bygge.tscn\")
const POOP = preload(\"res://scenes/buildings/shithouse.tscn\")
const HOUSE = preload(\"res://scenes/buildings/house.tscn\")
var poop_chance : float = 0.1

var my_buildings : Array = [BYGGE, POOP, HOUSE]
var weights: Array = PackedFloat32Array([2, 0.1, 0.8])
var rng : RandomNumberGenerator = RandomNumberGenerator.new()


# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	for n in get_children():
		remove_child(n)
	
	for x in range(0, 10):
		for y in range(0, 10):
			_spawn_building(x,y)
			

	bake_navigation_polygon()

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(_delta: float) -> void:
	pass
	
func _spawn_building(x: float, y : float) -> void:
	var building : Node = my_buildings[rng.rand_weighted(weights)].instantiate()
	building.position.x = x * 100
	building.position.y = y * 100
	add_child(building)
"

[node name="Testscne2" type="Node2D"]
script = ExtResource("1_r2gxb")

[node name="Camera2D" type="Camera2D" parent="."]
offset = Vector2(0, 100)
zoom = Vector2(0.67, 0.67)

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
position = Vector2(-400, -200)
navigation_polygon = SubResource("NavigationPolygon_4kd2u")
script = SubResource("GDScript_lbftg")
