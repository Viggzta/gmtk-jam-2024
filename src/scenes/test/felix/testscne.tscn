[gd_scene load_steps=4 format=3 uid="uid://ibjjv2483um"]

[ext_resource type="Script" path="res://scenes/test/felix/testscne.gd" id="1_66df6"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_4kd2u"]
vertices = PackedVector2Array(438, 365, 438, 451, 424, 424, 424, 376, 362, 365, 376, 376, 362, 451, 376, 424, 962, 139, 738, 139, 524, 124, 576, 124, 724, 24, 924, 76, 876, 76, 662, 65, 676, 24, 762, 639, 638, 639, 424, 624, 476, 624, 462, 239, 338, 239, 224, 224, 276, 224, 562, 839, 438, 839, 324, 824, 376, 824, 424, 876, 376, 876, 262, 865, 276, 824, 238, 439, 138, 439, 24, 424, 76, 424, 1114.9, 1080.4, 562, 965, 624, 924, 676, 924, 724, 324, 738, 451, 724, 376, 724, 276, 724, 224, 338, 339, 238, 339, 224, 324, 276, 324, 924, 624, 962, 465, 924, 676, 24, 24, 24, -24, 38, -61, 38, 139, 724, 176, 676, 276, 424, 224, 476, 224, 924, 876, 876, 876, 862, 865, 876, 824, -214.75, 1118.58, 438, 965, 924, 576, 1106.09, -138.133, 924, 524, 524, 324, 576, 324, 676, 376, 562, 339, 724, 624, 776, 624, 876, 676, 338, 65, 338, 165, 324, 124, 324, 76, 638, 765, 624, 724, 624, 676, 438, 639, 438, 765, 424, 724, 424, 676, 738, 765, 738, 865, 724, 824, 724, 776, 424, 924, 924, 24, 924, -24, 924, 476, 862, 465, 876, 476, 662, -61, 676, -24, 576, 924, 576, 876, 262, 65, 276, 76, 676, 776, 438, -61, 438, 39, 424, 24, 424, -24, 238, -61, 238, 39, 224, 24, 224, -24, 324, 324, 324, 276, 224, 424, 224, 376, 38, 639, 38, 739, 24, 724, 24, 676, 362, 39, 376, 24, 362, -61, 376, -24, 162, 39, 176, 24, 162, -61, 176, -24, 24, 124, -62, 139, -24, 124, -62, 739, -24, 724, 262, 165, 276, 124, 862, 565, 876, 524, 256, 565, 256, 648, 224, 624, 224, 576, 138, 565, 176, 576, 356, 465, 356, 548, 340, 551, 324, 524, 324, 476, 262, 465, 276, 476, 262, 551, 276, 524, 676, 424, 724, 424, 662, 451, 662, 439, 624, 424, 624, 376, 562, 439, 576, 424, 576, 376, 562, 765, 576, 724, 624, 776, 576, 776, 562, 639, 576, 676, 676, 176, 276, 276, 262, 739, 276, 776, 876, -24, 876, 24, 824, 24, 824, -24, 76, 376, 62, 365, 62, 348, 140, 348, 124, 376, 176, 324, 140, 265, 162, 265, 176, 276, 876, 124, 824, 124, 824, 76, 776, 76, 676, 224, 624, 224, 624, 176, 576, 176, 476, 124, 676, 324, 624, 324, 624, 276, 576, 276, 138, 451, 62, 451, 62, 439, -62, 439, -24, 424, 62, 565, 62, 548, 138, 548, 124, 576, 76, 576, 438, 548, 438, 565, 424, 576, 376, 576, 662, 565, 662, 548, 738, 548, 738, 565, 724, 576, 676, 576, 876, 576, 876, 624, 824, 624, 824, 576, 776, 576, 876, 724, 862, 739, 824, 724, 824, 676, 876, 924, 824, 924, 824, 876, 776, 876, 340, 648, 376, 624, 176, 624, 124, 624, 676, 824, 624, 824, 776, 924, 724, 924, 724, 876, 276, 176, 324, 176, 376, 724, 324, 724, 376, 676, 324, 676, 376, 924, 324, 924, 324, 876, 276, 876, 724, -24, -24, -24, -193.227, -150.859, 176, 376, 624, 876, 324, 776, 24, 624, -24, 676, -24, 624, 924, 124, -24, 76, -24, 376, -62, 365, -62, 565, 924, 824, 576, 824, 524, 824, 524, 776, 276, 924, 224, 924, 224, 876, 924, 924, 876, 776, 924, 724, 924, 776, 224, 276, 176, 224, 176, 424, 124, 424, 576, 224, 524, 176, 24, 76, -24, 24, 76, 624, 24, 576, 762, 739, 776, 724, 776, 676, 462, 339, 476, 324, 476, 276, 524, 276, 676, 876, 776, 24, 776, -24, 524, 224, 476, 176, 462, 165, 676, 624, 624, 624, 624, 576, 376, 224, 324, 224, 376, 176, 576, 576, 476, 824, 424, 824, 476, 776, 424, 776, 276, 724, 224, 724, 376, 776, 276, 676, 224, 676, 62, 865, 176, 876, 424, 176, 176, 924, 124, 924, 62, 965, 124, 876, 76, 876, 76, 924, -62, 965, 162, 639, -24, 576, 24, 376, 776, 124, 724, 124, 724, 76, 676, 76, 676, 124, 624, 124, 624, 76, 224, 176, 576, 624, 524, 624, 524, 576, 476, 576, 162, 739, 176, 724, 176, 676, 462, 65, 576, 76, 162, 165, 176, 176, 476, 76, 524, 76)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 0, 3, 5), PackedInt32Array(6, 4, 5, 7), PackedInt32Array(2, 1, 6, 7), PackedInt32Array(8, 9, 10, 11), PackedInt32Array(12, 13, 14, 15, 16), PackedInt32Array(17, 18, 19, 20), PackedInt32Array(21, 22, 23, 24), PackedInt32Array(25, 26, 27, 28), PackedInt32Array(29, 30, 31, 32, 27, 26), PackedInt32Array(33, 34, 35, 36), PackedInt32Array(37, 38, 39, 40), PackedInt32Array(41, 9, 42, 43), PackedInt32Array(9, 41, 44), PackedInt32Array(45, 9, 44), PackedInt32Array(46, 47, 48, 49), PackedInt32Array(50, 51, 37, 52), PackedInt32Array(53, 54, 55, 56), PackedInt32Array(9, 45, 57), PackedInt32Array(44, 58, 59, 60), PackedInt32Array(61, 62, 63, 64), PackedInt32Array(38, 37, 65, 66), PackedInt32Array(51, 50, 67), PackedInt32Array(68, 37, 51, 8), PackedInt32Array(69, 51, 67), PackedInt32Array(70, 71, 43, 72, 73), PackedInt32Array(74, 75, 52, 76, 17), PackedInt32Array(77, 78, 79, 80), PackedInt32Array(18, 81, 82, 83), PackedInt32Array(84, 85, 86, 87), PackedInt32Array(88, 89, 90, 91), PackedInt32Array(26, 66, 92, 29), PackedInt32Array(68, 8, 93, 94), PackedInt32Array(51, 69, 95), PackedInt32Array(96, 51, 95, 97), PackedInt32Array(16, 15, 98, 99), PackedInt32Array(100, 39, 38), PackedInt32Array(100, 38, 25, 101), PackedInt32Array(102, 77, 80, 103), PackedInt32Array(81, 88, 91, 104), PackedInt32Array(105, 106, 107, 108), PackedInt32Array(109, 110, 111, 112), PackedInt32Array(22, 46, 113, 114), PackedInt32Array(47, 33, 115, 116), PackedInt32Array(117, 118, 119, 120), PackedInt32Array(107, 106, 121, 122), PackedInt32Array(122, 121, 123, 124), PackedInt32Array(111, 110, 125, 126), PackedInt32Array(126, 125, 127, 128), PackedInt32Array(129, 56, 130, 131), PackedInt32Array(119, 118, 132, 133), PackedInt32Array(134, 102, 103, 135), PackedInt32Array(136, 96, 97, 137), PackedInt32Array(138, 139, 140, 141), PackedInt32Array(142, 138, 141, 143), PackedInt32Array(144, 145, 146, 147, 148), PackedInt32Array(149, 144, 148, 150), PackedInt32Array(151, 149, 150, 152), PackedInt32Array(153, 154, 42, 155, 156), PackedInt32Array(72, 153, 156, 157, 158), PackedInt32Array(157, 156, 159, 160), PackedInt32Array(160, 159, 73, 161), PackedInt32Array(146, 151, 152, 147), PackedInt32Array(162, 163, 82, 81, 164, 165), PackedInt32Array(163, 162, 166, 167), PackedInt32Array(10, 9, 57, 168), PackedInt32Array(23, 22, 114, 169), PackedInt32Array(32, 31, 170, 171), PackedInt32Array(172, 173, 174, 175), PackedInt32Array(176, 177, 178, 179, 180), PackedInt32Array(181, 179, 182, 183, 184), PackedInt32Array(14, 185, 186, 187), PackedInt32Array(15, 14, 187), PackedInt32Array(15, 187, 188), PackedInt32Array(168, 189, 190, 191), PackedInt32Array(10, 168, 191), PackedInt32Array(10, 191, 192, 193), PackedInt32Array(189, 45, 44), PackedInt32Array(58, 194, 195, 196), PackedInt32Array(59, 58, 196), PackedInt32Array(59, 196, 197, 21), PackedInt32Array(34, 198, 199, 200), PackedInt32Array(35, 34, 200), PackedInt32Array(35, 200, 201, 202), PackedInt32Array(203, 204, 205, 142, 206, 207), PackedInt32Array(145, 208, 209, 210, 211), PackedInt32Array(212, 213, 214, 215, 216, 217), PackedInt32Array(137, 69, 67, 218, 136), PackedInt32Array(218, 219, 220, 221, 136), PackedInt32Array(215, 136, 221, 222), PackedInt32Array(76, 223, 224, 225, 226), PackedInt32Array(62, 227, 228, 229, 63), PackedInt32Array(89, 63, 229, 230), PackedInt32Array(231, 146, 145, 211, 232), PackedInt32Array(142, 143, 233, 234, 206), PackedInt32Array(215, 222, 75, 74, 216), PackedInt32Array(81, 104, 235, 236, 164), PackedInt32Array(89, 230, 237, 238, 239), PackedInt32Array(240, 134, 135, 79, 78, 241), PackedInt32Array(242, 86, 85), PackedInt32Array(242, 85, 243), PackedInt32Array(244, 242, 243, 245), PackedInt32Array(235, 90, 89), PackedInt32Array(235, 89, 236), PackedInt32Array(246, 92, 66), PackedInt32Array(246, 66, 247), PackedInt32Array(30, 246, 247, 248), PackedInt32Array(31, 30, 248), PackedInt32Array(31, 248, 249), PackedInt32Array(250, 99, 98), PackedInt32Array(105, 108, 124, 123), PackedInt32Array(109, 112, 128, 127), PackedInt32Array(55, 54, 251, 252), PackedInt32Array(158, 161, 73), PackedInt32Array(48, 47, 116, 253, 181), PackedInt32Array(18, 83, 167, 166), PackedInt32Array(19, 18, 166), PackedInt32Array(19, 166, 84), PackedInt32Array(19, 84, 87, 244, 232), PackedInt32Array(232, 244, 245, 231), PackedInt32Array(254, 101, 25), PackedInt32Array(255, 171, 170), PackedInt32Array(256, 117, 120, 257, 258), PackedInt32Array(8, 259, 13), PackedInt32Array(93, 8, 13), PackedInt32Array(173, 93, 13), PackedInt32Array(260, 131, 130), PackedInt32Array(261, 202, 201, 262), PackedInt32Array(257, 133, 132, 263), PackedInt32Array(64, 264, 37, 61), PackedInt32Array(162, 165, 265, 266, 267), PackedInt32Array(31, 249, 268, 269, 270), PackedInt32Array(37, 271, 61), PackedInt32Array(64, 63, 224, 272), PackedInt32Array(273, 274, 272, 224, 223), PackedInt32Array(174, 173, 13), PackedInt32Array(190, 189, 44), PackedInt32Array(49, 113, 46), PackedInt32Array(169, 49, 48, 275), PackedInt32Array(23, 169, 275, 276), PackedInt32Array(276, 275, 184, 183), PackedInt32Array(277, 115, 33), PackedInt32Array(277, 33, 278), PackedInt32Array(253, 277, 278, 180), PackedInt32Array(181, 253, 180, 179), PackedInt32Array(193, 192, 279, 280), PackedInt32Array(56, 129, 281), PackedInt32Array(53, 56, 281), PackedInt32Array(282, 53, 281, 260), PackedInt32Array(227, 271, 37), PackedInt32Array(233, 140, 139), PackedInt32Array(233, 139, 234), PackedInt32Array(203, 207, 283, 256, 284), PackedInt32Array(37, 264, 274), PackedInt32Array(273, 37, 274), PackedInt32Array(225, 224, 285, 286), PackedInt32Array(286, 285, 17, 287), PackedInt32Array(226, 287, 17), PackedInt32Array(228, 227, 37), PackedInt32Array(68, 94, 172), PackedInt32Array(282, 260, 130, 252), PackedInt32Array(72, 158, 73), PackedInt32Array(70, 73, 288, 289), PackedInt32Array(289, 288, 21, 290), PackedInt32Array(291, 290, 21), PackedInt32Array(76, 226, 17), PackedInt32Array(237, 228, 37), PackedInt32Array(237, 37, 238), PackedInt32Array(266, 265, 89, 239, 292, 25), PackedInt32Array(37, 273, 52), PackedInt32Array(219, 50, 52), PackedInt32Array(220, 219, 52), PackedInt32Array(293, 174, 13), PackedInt32Array(293, 13, 12), PackedInt32Array(294, 293, 12, 250), PackedInt32Array(294, 250, 98, 68), PackedInt32Array(279, 190, 44), PackedInt32Array(279, 44, 295), PackedInt32Array(279, 295, 280), PackedInt32Array(193, 280, 296, 297), PackedInt32Array(75, 220, 52), PackedInt32Array(212, 217, 298, 299, 300), PackedInt32Array(42, 154, 43), PackedInt32Array(194, 41, 43), PackedInt32Array(195, 194, 43), PackedInt32Array(71, 195, 43), PackedInt32Array(197, 71, 70, 291), PackedInt32Array(197, 291, 21), PackedInt32Array(68, 172, 175), PackedInt32Array(68, 175, 294), PackedInt32Array(252, 68, 98, 105), PackedInt32Array(252, 105, 123), PackedInt32Array(252, 123, 109), PackedInt32Array(252, 109, 127), PackedInt32Array(252, 127, 55), PackedInt32Array(252, 251, 282), PackedInt32Array(65, 252, 130, 262), PackedInt32Array(40, 238, 37), PackedInt32Array(292, 40, 39, 254), PackedInt32Array(292, 254, 25), PackedInt32Array(185, 259, 8), PackedInt32Array(301, 59, 21), PackedInt32Array(301, 21, 302), PackedInt32Array(303, 301, 302, 241, 78), PackedInt32Array(298, 74, 17), PackedInt32Array(298, 17, 299), PackedInt32Array(209, 212, 300, 304), PackedInt32Array(305, 266, 25), PackedInt32Array(305, 25, 306), PackedInt32Array(307, 305, 306, 308, 85), PackedInt32Array(309, 243, 85), PackedInt32Array(310, 309, 85, 308, 311, 170), PackedInt32Array(312, 309, 310, 313), PackedInt32Array(265, 236, 89), PackedInt32Array(85, 162, 267, 307), PackedInt32Array(268, 247, 66), PackedInt32Array(268, 66, 269), PackedInt32Array(314, 31, 270, 315), PackedInt32Array(60, 295, 44), PackedInt32Array(296, 60, 59, 316, 297), PackedInt32Array(317, 269, 66), PackedInt32Array(318, 317, 66, 319), PackedInt32Array(315, 317, 318, 320), PackedInt32Array(314, 315, 320), PackedInt32Array(314, 320, 321), PackedInt32Array(319, 314, 321, 322), PackedInt32Array(319, 322, 318), PackedInt32Array(319, 66, 65), PackedInt32Array(323, 319, 65), PackedInt32Array(132, 323, 65), PackedInt32Array(283, 234, 139), PackedInt32Array(256, 283, 139, 324), PackedInt32Array(263, 203, 284, 325), PackedInt32Array(263, 325, 258), PackedInt32Array(186, 185, 8), PackedInt32Array(36, 278, 33), PackedInt32Array(176, 36, 35, 326, 177), PackedInt32Array(327, 186, 8), PackedInt32Array(327, 8, 328), PackedInt32Array(188, 327, 328, 329), PackedInt32Array(15, 188, 329), PackedInt32Array(15, 329, 330), PackedInt32Array(15, 330, 331, 332, 333), PackedInt32Array(24, 302, 21), PackedInt32Array(240, 24, 23, 334, 134), PackedInt32Array(335, 299, 17), PackedInt32Array(335, 17, 336), PackedInt32Array(304, 335, 336, 337), PackedInt32Array(209, 304, 337), PackedInt32Array(209, 337, 338), PackedInt32Array(209, 338, 20, 19, 210), PackedInt32Array(28, 306, 25), PackedInt32Array(311, 28, 27, 255), PackedInt32Array(311, 255, 170), PackedInt32Array(310, 170, 339, 340), PackedInt32Array(340, 339, 324, 341), PackedInt32Array(313, 341, 324), PackedInt32Array(312, 313, 324), PackedInt32Array(245, 312, 324, 139), PackedInt32Array(331, 328, 8), PackedInt32Array(331, 8, 332), PackedInt32Array(342, 15, 333, 343), PackedInt32Array(20, 336, 17), PackedInt32Array(139, 231, 245), PackedInt32Array(256, 324, 117), PackedInt32Array(263, 258, 257), PackedInt32Array(263, 132, 65), PackedInt32Array(201, 263, 65), PackedInt32Array(201, 65, 262), PackedInt32Array(261, 262, 177, 326), PackedInt32Array(276, 183, 344, 345), PackedInt32Array(345, 344, 134, 334), PackedInt32Array(303, 78, 297, 316), PackedInt32Array(193, 297, 342, 346), PackedInt32Array(347, 346, 342), PackedInt32Array(347, 342, 343), PackedInt32Array(347, 343, 11, 10), PackedInt32Array(8, 11, 332)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-207, -165, -229, 1133, 1129, 1094, 1120, -152)])
agent_radius = 14.0

[sub_resource type="GDScript" id="GDScript_lbftg"]
script/source = "@tool
extends NavigationRegion2D

const BYGGE = preload(\"res://scenes/test/felix/bygge.tscn\")
const POOP = preload(\"res://scenes/buildings/shithouse.tscn\")
const HOUSE = preload(\"res://scenes/buildings/house.tscn\")
var poop_chance : float = 0.1

var my_buildings : Array = [BYGGE, POOP, HOUSE]
var weights : Array = PackedFloat32Array([2, 0.1, 0.8])
var rng : RandomNumberGenerator = RandomNumberGenerator.new()


# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	for n in get_children():
		remove_child(n)
	
	for x in range(0, 10):
		for y in range(0, 10):
			_spawn_building(x,y)
			

	bake_navigation_polygon()

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(_delta: float) -> void:
	pass
	
func _spawn_building(x: float, y : float) -> void:
	var building : Node = my_buildings[rng.rand_weighted(weights)].instantiate()
	building.position.x = x * 100
	building.position.y = y * 100
	add_child(building)
"

[node name="Testscne2" type="Node2D"]
script = ExtResource("1_66df6")

[node name="Camera2D" type="Camera2D" parent="."]
offset = Vector2(0, 100)
zoom = Vector2(0.67, 0.67)

[node name="Navmesh" type="NavigationRegion2D" parent="."]
position = Vector2(-400, -200)
navigation_polygon = SubResource("NavigationPolygon_4kd2u")
script = SubResource("GDScript_lbftg")
